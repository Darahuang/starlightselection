(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-148fe1b0"],{1915:function(e,t,c){"use strict";function a(){window.pageYOffset>100&&window.scrollTo({top:0,behavior:"smooth"})}c.d(t,"a",(function(){return a}))},"1dde":function(e,t,c){var a=c("d039"),o=c("b622"),r=c("2d00"),n=o("species");e.exports=function(e){return r>=51||!a((function(){var t=[],c=t.constructor={};return c[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"3a5e":function(e,t,c){"use strict";var a=c("7a23"),o=Object(a["createVNode"])("div",{class:"bubblingG"},[Object(a["createVNode"])("span",{id:"bubblingG_1"}),Object(a["createVNode"])("span",{id:"bubblingG_2"}),Object(a["createVNode"])("span",{id:"bubblingG_3"})],-1);function r(e,t,c,r,n,s){var l=Object(a["resolveComponent"])("loading",!0);return Object(a["openBlock"])(),Object(a["createBlock"])(l,{active:c.isLoading},{default:Object(a["withCtx"])((function(){return[o]})),_:1},8,["active"])}var n={props:{isLoading:{type:Boolean,default:!1}}};n.render=r;t["a"]=n},8418:function(e,t,c){"use strict";var a=c("c04e"),o=c("9bf2"),r=c("5c6c");e.exports=function(e,t,c){var n=a(t);n in e?o.f(e,n,r(0,c)):e[n]=c}},"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("d039"),r=c("e8b5"),n=c("861d"),s=c("7b0b"),l=c("50c4"),i=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),m=c("2d00"),f=b("isConcatSpreadable"),p=9007199254740991,O="Maximum allowed index exceeded",j=m>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),V=u("concat"),v=function(e){if(!n(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)},g=!j||!V;a({target:"Array",proto:!0,forced:g},{concat:function(e){var t,c,a,o,r,n=s(this),u=d(n,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?n:arguments[t],v(r)){if(o=l(r.length),b+o>p)throw TypeError(O);for(c=0;c<o;c++,b++)c in r&&i(u,b,r[c])}else{if(b>=p)throw TypeError(O);i(u,b++,r)}return u.length=b,u}})},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,n=r.toString,s=/^\s*function ([^ (]*)/,l="name";a&&!(l in r)&&o(r,l,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(e){return""}}})},b7c8:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o={class:"container my-5"},r={class:"row justify-content-center"},n={class:"col-lg-10"},s={class:"row flex-row-reverse"},l={class:"col-lg-4 mb-3 mb-lg-0"},i={class:"bg-primary-light"},d={class:"ms-3"},u={class:"h5"},b={class:"p-3"},m={class:"d-flex justify-content-between border-top pt-3"},f=Object(a["createVNode"])("p",{class:"h6 text-end"},"應付金額:",-1),p={key:0,class:"h5 text-end text-primary fw-bold"},O={class:"col-lg-8"},j=Object(a["createVNode"])("span",{class:"text-danger px-3"},"*為必填欄位",-1),V={class:"card border-0"},v={class:"card-body"},g={class:"row"},N={class:"col-lg-6"},h={class:"col mb-3"},y=Object(a["createVNode"])("label",{for:"name",class:"form-label"},"聯絡人姓名",-1),x=Object(a["createVNode"])("span",{class:"text-danger"},"*",-1),k={class:"col mb-3"},w=Object(a["createVNode"])("label",{for:"tel",class:"form-label"},"電話",-1),C=Object(a["createVNode"])("span",{class:"text-danger"},"*",-1),B={class:"col-lg-6"},S={class:"col mb-3"},_=Object(a["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),L=Object(a["createVNode"])("span",{class:"text-danger"},"*",-1),T={class:"col mb-3"},D=Object(a["createVNode"])("label",{for:"payment",class:"form-label"},"付款方式",-1),F=Object(a["createVNode"])("span",{class:"text-danger"},"*",-1),U=Object(a["createVNode"])("option",{disabled:"",value:""},"請選擇付款方式",-1),M={class:"col-12 mb-3"},P=Object(a["createVNode"])("label",{for:"address",class:"form-label"},"聯絡人地址",-1),$=Object(a["createVNode"])("span",{class:"text-danger"},"*",-1),q={class:"col-12 mb-4"},E=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"備註",-1),G={class:"form-floating"},A={class:"d-flex justify-content-between mt-3 align-items-center"},J=Object(a["createTextVNode"])(" 回到上一頁 ");function I(e,t,c,I,W,Y){var z=Object(a["resolveComponent"])("Loading"),H=Object(a["resolveComponent"])("CartStep"),K=Object(a["resolveComponent"])("Field"),Q=Object(a["resolveComponent"])("ErrorMessage"),R=Object(a["resolveComponent"])("router-link"),X=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(z,{isLoading:W.isLoading},null,8,["isLoading"]),Object(a["createVNode"])("section",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])(H,{done:W.done},null,8,["done"]),Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",i,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(W.carts.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{key:t.id,class:"p-3 d-flex"},[Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:"產品圖片",style:{width:"100px",height:"100px"}},null,8,["src"]),Object(a["createVNode"])("div",d,[Object(a["createVNode"])("h3",u,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("small",null,Object(a["toDisplayString"])(e.$filters.dollarSignThousandth(t.product.price)),1),Object(a["createVNode"])("small",null," * "+Object(a["toDisplayString"])(t.qty)+Object(a["toDisplayString"])(t.product.unit),1)])])})),128)),Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",m,[f,W.carts.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("p",p,Object(a["toDisplayString"])(e.$filters.dollarSignThousandth(W.carts.final_total)),1)):Object(a["createCommentVNode"])("",!0)])])])]),Object(a["createVNode"])("div",O,[j,Object(a["createVNode"])(X,{onSubmit:Y.createOrder},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createVNode"])("div",V,[Object(a["createVNode"])("div",v,[Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",N,[Object(a["createVNode"])("div",h,[y,x,Object(a["createVNode"])(K,{type:"text",class:["form-control form-input-bg",{"is-invalid":c["姓名"]}],id:"name",placeholder:"請輸入姓名",name:"姓名",rules:"required",modelValue:W.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return W.form.user.name=e}),ref:"name"},null,8,["class","modelValue"]),Object(a["createVNode"])(Q,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",k,[w,C,Object(a["createVNode"])(K,{id:"tel",name:"tel",type:"tel",class:["form-control form-input-bg",{"is-invalid":c["tel"]}],placeholder:"請輸入手機或家用電話",rules:Y.isPhone,modelValue:W.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=function(e){return W.form.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["createVNode"])(Q,{name:"tel",class:"invalid-feedback"})])]),Object(a["createVNode"])("div",B,[Object(a["createVNode"])("div",S,[_,L,Object(a["createVNode"])(K,{id:"email",name:"email",type:"email",class:["form-control form-input-bg",{"is-invalid":c["email"]}],placeholder:"請輸入Email",rules:"email|required",modelValue:W.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return W.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Q,{name:"email",class:"invalid-feedback"})]),Object(a["createVNode"])("div",T,[D,F,Object(a["createVNode"])(K,{class:["form-select form-input-bg",{"is-invalid":c["付款方式"]}],"aria-label":"Default select example",id:"payment",modelValue:W.form.user.payment_method,"onUpdate:modelValue":t[4]||(t[4]=function(e){return W.form.user.payment_method=e}),name:"付款方式",rules:"required",as:"select"},{default:Object(a["withCtx"])((function(){return[U,(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(W.payment,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("option",{value:e,key:t},Object(a["toDisplayString"])(e),9,["value"])})),128))]})),_:2},1032,["modelValue","class"]),Object(a["createVNode"])(Q,{name:"付款方式",class:"invalid-feedback"})])]),Object(a["createVNode"])("div",M,[P,$,Object(a["createVNode"])(K,{id:"address",name:"地址",type:"text",class:["form-control form-input-bg",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:W.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return W.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Q,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",q,[E,Object(a["createVNode"])("div",G,[Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{class:"form-control form-input-bg",id:"message",style:{height:"75px"},"onUpdate:modelValue":t[6]||(t[6]=function(e){return W.form.message=e})},"\n                        ",512),[[a["vModelText"],W.form.message]])])])])])]),Object(a["createVNode"])("div",A,[Object(a["createVNode"])(R,{to:"/carts",class:"text-decoration-none btn btn-outline-primary"},{default:Object(a["withCtx"])((function(){return[J]})),_:1}),Object(a["createVNode"])("button",{class:["btn btn-primary",{disabled:Y.checkForm}],type:"submit"}," 確認送出 ",2)])]})),_:1},8,["onSubmit"])])])])])])],64)}c("99af");var W=c("cfb9"),Y=c("3a5e"),z=c("ce4a"),H=c("1915"),K={data:function(){return{form:{user:{name:"",email:"",tel:"",address:"",payment_method:""},message:""},payment:["WebATM","ATM","CVS","Barcode","Credit","ApplePay","GooglePay"],carts:{},isLoading:!1,done:this.$route.name}},components:{Loading:Y["a"],CartStep:z["a"]},methods:{createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/order");this.axios.post(t,{data:this.form}).then((function(t){t.data.success&&(W["a"].emit("emit-carts"),e.$router.push("/payment/".concat(t.data.orderId)))})).catch((function(){e.Toast.fire({icon:"error",title:"無法建立訂單，請再次確認!"}),e.isLoading=!1}))},isPhone:function(e){var t=/^\(?(\d{2})\)?[\s\]?(\d{4})\-?(\d{4})$/ && /^[0-9]{8,10}$/;return!!t.test(e)||"需輸入手機或家用電話"},getCarts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart");this.isLoading=!0,this.axios.get(t).then((function(t){t.data.success&&(e.carts=t.data.data),Object(H["a"])(),e.isLoading=!1})).catch((function(){e.Toast.fire({icon:"error",title:"無法取得資料，請再次確認!"}),e.isLoading=!1}))}},computed:{checkForm:function(){return""===this.form.user.name||""===this.form.user.email||""===this.form.user.tel||""===this.form.user.address||""===this.form.user.payment_method}},created:function(){this.getCarts()}};K.render=I;t["default"]=K},ce4a:function(e,t,c){"use strict";var a=c("7a23"),o={class:"container mb-5"},r={class:"row position-relative"},n={class:"col"},s=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle fs-3"}," shopping_bag ",-1),l=Object(a["createVNode"])("p",{class:"cart-text"},"確認購物車",-1),i={class:"col"},d=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle fs-3"}," list_alt ",-1),u=Object(a["createVNode"])("p",{class:"cart-text"},"填寫資料",-1),b={class:"col"},m=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle fs-3"}," local_atm ",-1),f=Object(a["createVNode"])("p",{class:"cart-text"},"確認訂單",-1),p={class:"cart-line"};function O(e,t,c,O,j,V){return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",{class:["cart-step",{"cart-done":"Carts"===c.done||V.step2||V.step3}]},[s],2),l]),Object(a["createVNode"])("div",i,[Object(a["createVNode"])("div",{class:["cart-step",{"cart-done":"Checkout"===c.done||V.step3}]},[d],2),u]),Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",{class:["cart-step",{"cart-done":"Payment"===c.done}]},[m],2),f]),Object(a["createVNode"])("div",p,[Object(a["createVNode"])("div",{class:{"cart-line-step2":V.step2,"cart-line-step3":V.step3}},null,2)])])])}var j={props:{done:{type:String}},computed:{step2:function(){return"Checkout"===this.done},step3:function(){return"Payment"===this.done}}};j.render=O;t["a"]=j},cfb9:function(e,t,c){"use strict";var a=function(e){return{all:e=e||new Map,on:function(t,c){var a=e.get(t);a?a.push(c):e.set(t,[c])},off:function(t,c){var a=e.get(t);a&&(c?a.splice(a.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var a=e.get(t);a&&a.slice().map((function(e){e(c)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,c)}))}}},o=a();t["a"]=o}}]);
//# sourceMappingURL=chunk-148fe1b0.ec999f69.js.map