(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4099634"],{"009a":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),o={key:0,class:"container my-5"},n={class:"row justify-content-center"},r={class:"col-lg-10"},i={class:"row"},s={class:"col-lg-8 mb-3 mb-lg-0"},l={class:"flex-grow-1 ms-3 d-flex justify-content-between"},d={class:"h5"},u={class:"input-group input-group-sm my-3"},b=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle"}," remove ",-1),p=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle"}," add ",-1),f={class:"text-end ms-3"},j=Object(a["createVNode"])("span",{class:"material-icons"},"delete_forever",-1),O={class:"mt-5 h6"},g={class:"col-lg-4"},h={class:"card rounded-0"},m=Object(a["createVNode"])("div",{class:"card-header"},"訂單資訊",-1),v={class:"card-body"},V={class:"d-flex justify-content-between"},N=Object(a["createVNode"])("p",{class:"card-text"},"行程總額:",-1),y={key:0},x={class:"input-group"},k={class:"text-primary my-3"},C=Object(a["createVNode"])("span",{class:"material-icons-outlined align-text-bottom"}," star ",-1),w={key:0},T={key:1},B=Object(a["createTextVNode"])("輸入"),L=Object(a["createVNode"])("span",{class:"text-danger"},"anniversary",-1),S=Object(a["createTextVNode"])("可享95折優惠"),_={class:"d-flex justify-content-between border-bottom"},D=Object(a["createVNode"])("p",null,"折扣金額:",-1),q={key:0},M={class:"d-flex justify-content-between mt-3"},$=Object(a["createVNode"])("p",{class:"card-text"},"應付金額:",-1),G={key:0,class:"h5 text-primary fw-bold"},A={class:"text-muted d-grid gap-2"},U=Object(a["createTextVNode"])(" 前往結帳 "),E={key:1,class:"container"},F={class:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},z=Object(a["createVNode"])("div",{class:"cart-bg bg-contain bg-no-repeat"},null,-1),J=Object(a["createVNode"])("p",{class:"fw-bold h4 text-center mb-4"},[Object(a["createTextVNode"])(" 購物車目前沒有商品，"),Object(a["createVNode"])("br"),Object(a["createTextVNode"])(" 立刻挑選喜愛的行程吧！ ")],-1),P=Object(a["createTextVNode"])(" 挑選行程 ");function Y(e,t,c,Y,H,I){var K=Object(a["resolveComponent"])("Loading"),Q=Object(a["resolveComponent"])("CartStep"),R=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(K,{isLoading:H.isLoading},null,8,["isLoading"]),0!==H.carts.total?(Object(a["openBlock"])(),Object(a["createBlock"])("section",o,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])(Q,{done:H.done},null,8,["done"]),Object(a["createVNode"])("div",i,[Object(a["createVNode"])("div",s,[0!==H.carts.total?(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:0,href:"#",class:"d-block text-end text-decoration-none mb-3 link-hover link-dark",onClick:t[1]||(t[1]=Object(a["withModifiers"])((function(){return I.deleteAll&&I.deleteAll.apply(I,arguments)}),["prevent"]))},"清空購物清單")):Object(a["createCommentVNode"])("",!0),H.carts.carts?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:1},Object(a["renderList"])(H.carts.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"d-flex border p-3",key:t.id},[Object(a["createVNode"])("img",{src:t.product.imageUrl,alt:"產品圖片",style:{width:"120px",height:"120px"},class:"d-none d-sm-block"},null,8,["src"]),Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",null,[Object(a["createVNode"])("h3",d,Object(a["toDisplayString"])(t.product.title),1),Object(a["createVNode"])("small",null,Object(a["toDisplayString"])(e.$filters.dollarSignThousandth(t.product.price)),1),Object(a["createVNode"])("small",null," * "+Object(a["toDisplayString"])(t.qty)+Object(a["toDisplayString"])(t.product.unit),1),Object(a["createVNode"])("div",u,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return I.updateCart(t.id,t.qty-1)}},[b],8,["onClick"]),Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"number",class:"form-control text-center bg-transparent","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm",min:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return I.updateCart(t.id,t.qty)}},null,40,["onUpdate:modelValue","onChange"]),[[a["vModelText"],t.qty,void 0,{number:!0}]]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary",id:"button-addon1",onClick:function(e){return I.updateCart(t.id,t.qty+1)}},[p],8,["onClick"])])]),Object(a["createVNode"])("div",f,[Object(a["createVNode"])("a",{href:"#",class:"text-danger",onClick:Object(a["withModifiers"])((function(e){return I.deleteCart(t.id)}),["prevent"])},[j],8,["onClick"]),Object(a["createVNode"])("p",O,Object(a["toDisplayString"])(e.$filters.dollarSignThousandth(t.final_total)),1)])])])})),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])("div",h,[m,Object(a["createVNode"])("div",v,[Object(a["createVNode"])("div",V,[N,H.carts.total?(Object(a["openBlock"])(),Object(a["createBlock"])("p",y,Object(a["toDisplayString"])(e.$filters.dollarSignThousandth(H.carts.total)),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",x,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":t[2]||(t[2]=function(e){return H.coupon=e})},null,512),[[a["vModelText"],H.coupon]]),Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[3]||(t[3]=function(){return I.addCouponCode&&I.addCouponCode.apply(I,arguments)})}," 套用優惠碼 ")]),Object(a["createVNode"])("div",k,[C,H.carts.total!==H.carts.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("span",w,"已套用優惠券")):(Object(a["openBlock"])(),Object(a["createBlock"])("span",T,[B,L,S]))]),Object(a["createVNode"])("div",_,[D,H.carts.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("p",q,Object(a["toDisplayString"])(e.$filters.dollarSignThousandth(H.carts.total-H.carts.final_total)),1)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("div",M,[$,H.carts.final_total?(Object(a["openBlock"])(),Object(a["createBlock"])("p",G,Object(a["toDisplayString"])(e.$filters.dollarSignThousandth(H.carts.final_total)),1)):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",A,[Object(a["createVNode"])(R,{to:"/checkout",class:"btn btn-slide-right border-0 rounded-0"},{default:Object(a["withCtx"])((function(){return[U]})),_:1})])])])])])])])):(Object(a["openBlock"])(),Object(a["createBlock"])("section",E,[Object(a["createVNode"])("div",F,[z,J,Object(a["createVNode"])(R,{to:"/products",class:"btn btn-slide-right border-0 px-5 py-2"},{default:Object(a["withCtx"])((function(){return[P]})),_:1})])]))],64)}c("b0c0"),c("99af");var H=c("cfb9"),I=c("3a5e"),K=c("ce4a"),Q=c("1915"),R={data:function(){return{isLoading:!1,carts:{},coupon:"",done:this.$route.name}},components:{Loading:I["a"],CartStep:K["a"]},inject:["Toast"],methods:{getCarts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart");this.isLoading=!0,this.axios.get(t).then((function(t){t.data.success&&(e.carts=t.data.data),Object(Q["a"])(),e.isLoading=!1})).catch((function(){e.Toast.fire({icon:"error",title:"無法取得購物車內容，請再次確認!"}),e.isLoading=!1}))},updateCart:function(e,t){var c=this,a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart/").concat(e);if(t<=0)this.Toast.fire({icon:"error",title:"人數至少1位"});else{var o={product_id:e,qty:t};this.isLoading=!0,this.axios.put(a,{data:o}).then((function(e){e.data.success?(c.getCarts(),c.Toast.fire({icon:"success",title:"".concat(e.data.message)})):c.Toast.fire({icon:"error",title:"".concat(e.data.message)}),c.isLoading=!1})).catch((function(){c.Toast.fire({icon:"error",title:"無法報名，請再次確認!"}),c.isLoading=!1}))}},deleteAll:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/carts");this.axios.delete(t).then((function(t){t.data.success?(H["a"].emit("emit-carts"),e.getCarts(),e.Toast.fire({icon:"success",title:"".concat(t.data.message)})):e.Toast.fire({icon:"error",title:"".concat(t.data.message)})})).catch((function(){e.Toast.fire({icon:"error",title:"無法清除購物清單，請再次確認!"}),e.isLoading=!1}))},deleteCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/cart/").concat(e);this.isLoading=!0,this.axios.delete(c).then((function(e){e.data.success?(H["a"].emit("emit-carts"),t.getCarts(),t.Toast.fire({icon:"success",title:"".concat(e.data.message)})):t.Toast.fire({icon:"error",title:"".concat(e.data.message)}),t.isLoading=!1})).catch((function(){t.Toast.fire({icon:"error",title:"無法清除購物清單，請再次確認!"}),t.isLoading=!1}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("starlightselection","/coupon");this.isLoading=!0;var c={code:this.coupon};this.axios.post(t,{data:c}).then((function(t){t.data.success?(e.getCarts(),e.Toast.fire({icon:"success",title:"".concat(t.data.message)})):e.Toast.fire({icon:"error",title:"".concat(t.data.message)}),e.isLoading=!1})).catch((function(){e.Toast.fire({icon:"error",title:"無法使用優惠券，請再次確認!"}),e.isLoading=!1}))}},created:function(){this.getCarts()}};R.render=Y;t["default"]=R},1915:function(e,t,c){"use strict";function a(){window.pageYOffset>100&&window.scrollTo({top:0,behavior:"smooth"})}c.d(t,"a",(function(){return a}))},"1dde":function(e,t,c){var a=c("d039"),o=c("b622"),n=c("2d00"),r=o("species");e.exports=function(e){return n>=51||!a((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"3a5e":function(e,t,c){"use strict";var a=c("7a23"),o=Object(a["createVNode"])("div",{class:"bubblingG"},[Object(a["createVNode"])("span",{id:"bubblingG_1"}),Object(a["createVNode"])("span",{id:"bubblingG_2"}),Object(a["createVNode"])("span",{id:"bubblingG_3"})],-1);function n(e,t,c,n,r,i){var s=Object(a["resolveComponent"])("loading",!0);return Object(a["openBlock"])(),Object(a["createBlock"])(s,{active:c.isLoading},{default:Object(a["withCtx"])((function(){return[o]})),_:1},8,["active"])}var r={props:{isLoading:{type:Boolean,default:!1}}};r.render=n;t["a"]=r},8418:function(e,t,c){"use strict";var a=c("c04e"),o=c("9bf2"),n=c("5c6c");e.exports=function(e,t,c){var r=a(t);r in e?o.f(e,r,n(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("d039"),n=c("e8b5"),r=c("861d"),i=c("7b0b"),s=c("50c4"),l=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),f=b("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",g=p>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),h=u("concat"),m=function(e){if(!r(e))return!1;var t=e[f];return void 0!==t?!!t:n(e)},v=!g||!h;a({target:"Array",proto:!0,forced:v},{concat:function(e){var t,c,a,o,n,r=i(this),u=d(r,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(n=-1===t?r:arguments[t],m(n)){if(o=s(n.length),b+o>j)throw TypeError(O);for(c=0;c<o;c++,b++)c in n&&l(u,b,n[c])}else{if(b>=j)throw TypeError(O);l(u,b++,n)}return u.length=b,u}})},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,n=Function.prototype,r=n.toString,i=/^\s*function ([^ (]*)/,s="name";a&&!(s in n)&&o(n,s,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(e){return""}}})},ce4a:function(e,t,c){"use strict";var a=c("7a23"),o={class:"container mb-5"},n={class:"row position-relative"},r={class:"col"},i=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle fs-3"}," shopping_bag ",-1),s=Object(a["createVNode"])("p",{class:"cart-text"},"確認購物車",-1),l={class:"col"},d=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle fs-3"}," list_alt ",-1),u=Object(a["createVNode"])("p",{class:"cart-text"},"填寫資料",-1),b={class:"col"},p=Object(a["createVNode"])("span",{class:"material-icons-outlined align-middle fs-3"}," local_atm ",-1),f=Object(a["createVNode"])("p",{class:"cart-text"},"確認訂單",-1),j={class:"cart-line"};function O(e,t,c,O,g,h){return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("div",{class:["cart-step",{"cart-done":"Carts"===c.done||h.step2||h.step3}]},[i],2),s]),Object(a["createVNode"])("div",l,[Object(a["createVNode"])("div",{class:["cart-step",{"cart-done":"Checkout"===c.done||h.step3}]},[d],2),u]),Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",{class:["cart-step",{"cart-done":"Payment"===c.done}]},[p],2),f]),Object(a["createVNode"])("div",j,[Object(a["createVNode"])("div",{class:{"cart-line-step2":h.step2,"cart-line-step3":h.step3}},null,2)])])])}var g={props:{done:{type:String}},computed:{step2:function(){return"Checkout"===this.done},step3:function(){return"Payment"===this.done}}};g.render=O;t["a"]=g},cfb9:function(e,t,c){"use strict";var a=function(e){return{all:e=e||new Map,on:function(t,c){var a=e.get(t);a?a.push(c):e.set(t,[c])},off:function(t,c){var a=e.get(t);a&&(c?a.splice(a.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var a=e.get(t);a&&a.slice().map((function(e){e(c)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,c)}))}}},o=a();t["a"]=o}}]);
//# sourceMappingURL=chunk-d4099634.cd3f7206.js.map